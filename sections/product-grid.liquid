{{ 'product-grid.css' | asset_url | stylesheet_tag }}
<script src="{{ 'product-grid.js' | asset_url }}" defer="defer"></script>
{% style %}
  .grid-{{ section.id }} {
    display:grid;
    grid-template-columns:repeat({{ section.settings.rows_in_mobile }}, 1fr);
    gap:4px;
  }

  @media only screen and (min-width:768px) {
    .grid-{{ section.id }} {
    grid-template-columns:repeat({{ section.settings.rows_in_desktop }}, 1fr);
    gap:20px;
  }
  }
{% endstyle %}
<div class="page-width">
  <div>
    <h2 class='section-heading'>{{ section.settings.heading }}</h2>
  </div>
  <div>
    {%  assign bundle_product_id = all_products[section.settings.bundle_product].selected_or_first_available_variant.id %}
    <product-grid class="grid-{{ section.id }}" data-bundle-id='{{ bundle_product_id }}' data-bundle-condition='{{ section.settings.condition }}'>

      <dialog>
        <div class="content">
          <button class="close"></button>

          <div class="quick-card"></div>
        </div>
      </dialog>
      {% for product in section.settings.product_list %}
        <div>
          <div class="product-image">
            {% render 'image', mobileImage: product.featured_image, desktopImage: product.featured_image %}
            <button
              class="popup-button"
              hotspot-button
              data-variant-id="{{ product.selected_or_first_available_variant.id }}"
              data-product-handle="{{ product.handle }}"
            >
              <div class="hotspot">+</div>
            </button>
          </div>
        </div>
      {% endfor %}
    </product-grid>
  </div>
</div>

{% schema %}
{
  "name": "Product Grid",
  "tag": "section",
  "class": "product-grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default":"Tisso Vision in the wild"
    },
    {
      "type": "product_list",
      "id": "product_list",
      "label": "Product List"
    },
    {
      "type": "select",
      "label": "number of row in mobile",
      "id": "rows_in_mobile",
      "default": "2",
      "options": [
        {
          "label": "one",
          "value": "1"
        },
        {
          "label": "two",
          "value": "2"
        }
      ]
    },
    {
      "type": "select",
      "label": "number of rows in Desktop",
      "id": "rows_in_desktop",
      "default": "2",
      "options": [
        {
          "label": "one",
          "value": "1"
        },
        {
          "label": "two",
          "value": "2"
        },
        {
          "label": "three",
          "value": "3"
        }
      ]
    },
    {
      "type": "header",
      "content": "bundle Product"
    },
    {
      "type": "product",
      "id": "bundle_product",
      "label": "Bundle Product"
    },
    {
      "type": "text",
      "id": "condition",
      "label": "bundle product Condition",
      "info": "add the option of the product,if the condition matches then bunlde product will added along with product. ex s,black"
    }
  ],
  "presets": [
    {
      "name": "Product Grid"
    }
  ]
}
{% endschema %}
